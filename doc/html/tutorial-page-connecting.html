<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SapphoDatabaseConnection: Step 3: Connecting</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">SapphoDatabaseConnection
   
   </div>
   <div id="projectbrief">A universal database connection interface for MySQL and postgreSQL</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('tutorial-page-connecting.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Step 3: Connecting </div>  </div>
</div>
<div class="contents">
<div class="textblock"><p>In steps 1 and 2 we built a basic database with a webinterface. Within the next step we will connect our page to the database and check whether the connection was established successfully.</p>
<h2><a class="anchor" id="tutorial-page-connect-build"></a>
Building a connection</h2>
<p>The connection will be established by the SDBC. So all you have to do is to create a new instance of the <a class="el" href="class_sappho_database_connection.html" title="This class handles connections to different database types. You&#39;ll probably want to use this one...">SapphoDatabaseConnection</a> class and call its connect(...) method. Because we'll need this part of the code within different scripts, we'll to the connection in a separate script called <code>connect.php</code>. Before we can use any of our library classes we have to load them by </p>
<div class="fragment"><pre class="fragment">require_once(<span class="stringliteral">&quot;../lib/sdbc/sappho_sdbc.php&quot;</span>);
</pre></div><p> This file automatically loads all used classes and provides us with the <a class="el" href="class_sappho_database_connection.html" title="This class handles connections to different database types. You&#39;ll probably want to use this one...">SapphoDatabaseConnection</a> calss that provides us with the dynamic interface to the database.</p>
<p>After loaded the library we create a new instace of the connector and provide it with the database type, hostname, database name and username (in exactly this order). Mind that this tutorial only uses a connection to a MySQL datbase. If you in fact are using a postgreSQL database just change the <code>db_type_mysql</code> to <code>db_type_postgre</code> - everything else will be done the same way! </p>
<div class="fragment"><pre class="fragment">    $sdbc = <span class="keyword">new</span> <a class="code" href="class_sappho_database_connection.html" title="This class handles connections to different database types. You&#39;ll probably want to use this one...">SapphoDatabaseConnection</a>(
                    <a class="code" href="class_sappho_database_connection.html#ade3bbda6a1caae1f20eeef03a6817518">SapphoDatabaseConnection::db_type_mysql</a>,
                    <span class="stringliteral">&quot;localhost&quot;</span>,
                    <span class="stringliteral">&quot;sdbc_tutorial&quot;</span>,
                    <span class="stringliteral">&quot;sdbc_tutorial&quot;</span>
                );
</pre></div><p>Now we've got an interface to our database - so the next step is to connect to the database. On this occasion we'll see a very comfortable behaviour of the library that makes it very easy to determine if an error occured during the execution of a method:</p>
<p><em>Every method (with a few exceptions) of <a class="el" href="class_sappho_database_connection.html" title="This class handles connections to different database types. You&#39;ll probably want to use this one...">SapphoDatabaseConnection</a> returns 0 (zero) if it was successful. If it was not it will return an error code.</em></p>
<p>To connect to the database we use the connect(...) method. If it returns zero everything was fine, otherwise we have to print an error message: </p>
<div class="fragment"><pre class="fragment"><span class="keywordflow">if</span>($sdbc-&gt;connect(<span class="stringliteral">&#39;sdbc1234&#39;</span>))
      die(<span class="stringliteral">&quot;Could not connect to the database: &quot;</span>.$sdbc-&gt;lastError());
</pre></div><p>This code tries to log in with the given password. If this was not successful we will print the returned error message. As you can see the <code>lastError()</code> method will return the last error message that was returned from the database service.</p>
<h2><a class="anchor" id="tutorial-page-connect-index"></a>
Connecting the page</h2>
<p>Now we have a script that will connect us to the database and provide a handle (<code>$sdbc</code>) that we can use for database queries. To use this handle we have to load the connection script whenever our startpage is called. This is achieved by including this file at the beginning of our <code>index.php</code>. Nothing new for those of you who already familiar with PHP: </p>
<div class="fragment"><pre class="fragment">&lt;?php
    require_once(<span class="stringliteral">&#39;connect.php&#39;</span>);
?&gt;
&lt;html&gt;
...
</pre></div> </div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="index.html">index</a>      </li>
      <li class="navelem"><a class="el" href="tutorial-page-main.html">Tutorial</a>      </li>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


    <li class="footer">Generated on Mon Oct 24 2011 16:45:22 for SapphoDatabaseConnection by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
