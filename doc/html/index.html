<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SapphoDatabaseConnection: Main Page</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">SapphoDatabaseConnection
   
   </div>
   <div id="projectbrief">A universal database connection interface for MySQL and postgreSQL</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">SapphoDatabaseConnection Documentation</div>  </div>
</div>
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="main-overview"></a>
Overview</h2>
<p>The Sappho Database Connector (SDBC) is a PHP class that is able to establish a conenction to differnt types of database like MySQL or postgreSQL. It main advantage is that you - as a developer - don't have to care about the correct syntax of a statement or calling the right PHP functions to issue the SQL commands th the database.</p>
<h2><a class="anchor" id="main-advanages"></a>
Why use SDBC?</h2>
<p>The advantages will be obvious if we consider the following examples.</p>
<h3><a class="anchor" id="main-advantages-example1"></a>
Example I: Customer's opionions - and consequences</h3>
<p>If you did code a big webapplication for a customer that always used MySQL as backend database. Imagine about thounands of database requests that are sent to the database in you'r code. Now imagine * further that the customer suddenly - like all customers do once in a while - wants to change his or her database system to another one like postgreSQL. You would have to rewrite whole sections of code to satisfy the needs of your employer - and you'd lose some hours of your life by just doing that.</p>
<p>Now consider what happens if you use a DB Interface like the SDBC. You could reduce the effort of rewriting code by just changing the type of your database from <code>db_type_mysql</code> to <code>db_type_postgresql!</code> (Well of course there are always statements and code sections that need adaption, but these are only a few)</p>
<h3><a class="anchor" id="main-advantages-example2"></a>
Example II: Supporting multiple database types</h3>
<p>Again I require a bit of your imagination. Think about an other webapplication you coded that is quite huge and offers a lot of configurable options - ranging from the background color of the page to the amount of lines per page. There even might be an option to configure which kind of database I want to use.</p>
<p>Usually it will require lots and lots of code to ensure that the webmaster can choose if he (or she) wants to use MySQL or postgreSQL or anything else. You'd have to write all the code from connection to the database to issuing a query and finally closing the conenction at least twice. Like stated before: lots and lots of code...</p>
<p>If you use the SDBC the only thing you'll have to do if the webmaster want's to use a different databse is to change the type of the database when creating an instance of the SDBC. You see: loads of code saved for later use!</p>
<h2><a class="anchor" id="main-howto"></a>
How SDBC works</h2>
<p>Let's take a short look about how the Sappho Database Connectoion works. Basically you'll need three steps:</p>
<ol type="1">
<li>Establish connection</li>
<li>Send request to database</li>
<li>Close connection We'll take a short look about all of the three steps.</li>
</ol>
<h3><a class="anchor" id="main-howoto-connect"></a>
Establishing connection</h3>
<p>To establish a new connection to the database you'll first need an instance of the SDBC. When creating this instance you have to pass almost all connection data to the class: </p>
<div class="fragment"><pre class="fragment">     $sdbc = <a class="code" href="class_sappho_database_connection.html" title="This class handles connections to different database types.">SapphoDatabaseConnection</a>(SapphoDatabasConnetion::db_type_mysql,
                                      <span class="stringliteral">&#39;localhost&#39;</span>,
                                      <span class="stringliteral">&#39;mydb&#39;</span>,
                                      <span class="stringliteral">&#39;userX&#39;</span>);
</pre></div><p> After this you'll have to log on to the database using a password. You probably want to know if the connection was successful and exit if not. Luckily the SDBC has a very easy concept for this task. Whenever a method did not execute sucessful it will return a returncode greather than 0. </p>
<div class="fragment"><pre class="fragment">    <span class="keywordflow">if</span>($sdbc-&gt;connect(<span class="stringliteral">&#39;password123&#39;</span>)) die(<span class="stringliteral">&quot;Connection was not established!&quot;</span>);
</pre></div><h3><a class="anchor" id="main-howto-workondb"></a>
Request something from the database</h3>
<p>To send a statement to the database you only have to call the according method of the class, pass the requested parameters and the SQL statement will be generated by the SDBC and executed. </p>
<div class="fragment"><pre class="fragment">    <span class="keywordflow">if</span>($sdbc-&gt;select(<span class="stringliteral">&#39;products&#39;</span>, <span class="charliteral">&#39;*&#39;</span>, <span class="stringliteral">&#39;availability &gt; 0&#39;</span>)) 
       die(<span class="stringliteral">&quot;Error while getting products: &quot;</span>.$dbc-&gt;lastError());
    <span class="keywordflow">while</span>($data = $sdbc-&gt;nextData())
       echo <span class="stringliteral">&quot;Procduct #&quot;</span>.$data[<span class="stringliteral">&#39;id&#39;</span>].<span class="stringliteral">&quot;: &quot;</span>.$data[<span class="stringliteral">&#39;name&#39;</span>].<span class="stringliteral">&quot; costs &amp;euro;&quot;</span>.$data[<span class="stringliteral">&#39;price&#39;</span>];
</pre></div><p> In the example above you cann see some very useful functions of the SDBC. First a <code>SELECT</code> statement is sent to the database and if an error occured we'll print the error message to show what caused it. Afterwards every retrieved dataset is printed.</p>
<h3><a class="anchor" id="main-howoto-close"></a>
Close connection</h3>
<p>At some point you'll be finished using the database and so you have to close the database conenction. In fact, this task is  optional because the connection is automatically closed if the SDBC Class is desctructed. But maybe you want to do this manually: </p>
<div class="fragment"><pre class="fragment">    $sdbc-&gt;close();
</pre></div><h2><a class="anchor" id="main-overallexample"></a>
An overall example</h2>
<p>We'll conclude this introductory text with a short example. It establishes a database connection and queries some data from a table. </p>
<div class="fragment"><pre class="fragment">    &lt;?php
       $sdbc = <a class="code" href="class_sappho_database_connection.html" title="This class handles connections to different database types.">SapphoDatabaseConnection</a>(SapphoDatabasConnetion::db_type_mysql,
                                        <span class="stringliteral">&#39;localhost&#39;</span>,
                                        <span class="stringliteral">&#39;mydb&#39;</span>,
                                        <span class="stringliteral">&#39;userX&#39;</span>);
       <span class="keywordflow">if</span>($sdbc-&gt;connect(<span class="stringliteral">&#39;password123&#39;</span>)) die(<span class="stringliteral">&quot;Connection could not be established!&quot;</span>)

       <span class="keywordflow">if</span>($sdbc-&gt;select(<span class="stringliteral">&#39;temp_table&#39;</span>, array(<span class="stringliteral">&#39;id&#39;</span>, <span class="stringliteral">&#39;data&#39;</span>), <span class="stringliteral">&#39;id = 0&#39;</span>))
          die(<span class="stringliteral">&quot;Error while reading data: &quot;</span>.$sdbc-&gt;lastError());
       
       $sdbc-&gt;close();
    ?&gt;
</pre></div> </div></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Thu Sep 22 2011 20:05:49 for SapphoDatabaseConnection by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
